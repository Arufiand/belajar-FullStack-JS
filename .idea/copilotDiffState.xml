<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/part1/src/Exercise2.jsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/part1/src/Exercise2.jsx" />
              <option name="originalContent" value="import { useEffect, useState } from &quot;react&quot;;&#10;import FilterComponent from &quot;../components/filter.component.jsx&quot;;&#10;import PersonForm from &quot;../components/personform.component.jsx&quot;;&#10;import Persons from &quot;../components/persons.component.jsx&quot;;&#10;&#10;import personServices from &quot;./services/axios.js&quot;;&#10;&#10;const App = () =&gt; {&#10;  const [persons, setPersons] = useState([]);&#10;  const [filter, setFilter] = useState(&quot;&quot;);&#10;  const [newName, setNewName] = useState(&quot;&quot;);&#10;  const [newNumber, setNewNumber] = useState(&quot;&quot;);&#10;&#10;  useEffect(() =&gt; {&#10;    personServices.getAll(&quot;persons&quot;).then((response) =&gt; {&#10;      setPersons(response.data);&#10;    });&#10;  }, []);&#10;&#10;  const handleFilterChange = (event) =&gt; {&#10;    setFilter(event.target.value);&#10;  };&#10;&#10;  const handleNameChange = (event) =&gt; {&#10;    console.log(event.target.value);&#10;    setNewName(event.target.value);&#10;  };&#10;  const addName = (event) =&gt; {&#10;    event.preventDefault();&#10;    if (checkDuplicate(newName)) {&#10;      alert(`${newName} is already added to phonebook`);&#10;      return;&#10;    }&#10;&#10;    const nameObject = {&#10;      name: newName,&#10;      number: newNumber,&#10;      id: persons.length + 1,&#10;    };&#10;    personServices.create(&quot;persons&quot;, nameObject).then((returnedObject) =&gt; {&#10;      setPersons(persons.concat(returnedObject.data));&#10;      setNewName(&quot;&quot;);&#10;      setNewNumber(&quot;&quot;);&#10;    });&#10;  };&#10;&#10;  const handleNumberChange = (event) =&gt; {&#10;    console.log(event.target.value);&#10;    setNewNumber(event.target.value);&#10;    // Implement number change handling if needed&#10;  };&#10;&#10;  const checkDuplicate = (name) =&gt; {&#10;    // fixed: compare names only&#10;    return persons.some((person) =&gt; person.name === name);&#10;  };&#10;  const personsToShow =&#10;    filter.trim() === &quot;&quot;&#10;      ? persons&#10;      : persons.filter((person) =&gt;&#10;          person.name.toLowerCase().includes(filter.toLowerCase()),&#10;        );&#10;&#10;  const handleDeletePerson = (id, name) =&gt; {&#10;    if (!window.confirm(`Delete ${name}?`)) return;&#10;&#10;    personServices&#10;      .remove(&quot;persons&quot;, id)&#10;      .then(() =&gt; {&#10;        setPersons(persons.filter((p) =&gt; p.id !== id));&#10;      })&#10;      .catch((error) =&gt; {&#10;        console.error(&quot;Failed to delete person:&quot;, error);&#10;        alert(`Information of ${name} has already been removed from server`);&#10;        setPersons(persons.filter((p) =&gt; p.id !== id));&#10;      });&#10;  };&#10;&#10;  return (&#10;    &lt;div&gt;&#10;      &lt;h2&gt;Phonebook&lt;/h2&gt;&#10;&#10;      &lt;FilterComponent&#10;        filter={filter}&#10;        handleFilterChange={handleFilterChange}&#10;      /&gt;&#10;&#10;      &lt;h3&gt;Add a new&lt;/h3&gt;&#10;&#10;      &lt;PersonForm&#10;        newName={newName}&#10;        newNumber={newNumber}&#10;        handleNameChange={handleNameChange}&#10;        handleNumberChange={handleNumberChange}&#10;        addName={addName}&#10;      /&gt;&#10;&#10;      &lt;h3&gt;Numbers&lt;/h3&gt;&#10;&#10;      &lt;Persons personsToShow={personsToShow} onDelete={handleDeletePerson} /&gt;&#10;&#10;      &lt;div&gt;debug: {newName}&lt;/div&gt;&#10;    &lt;/div&gt;&#10;  );&#10;};&#10;&#10;export default App;&#10;" />
              <option name="updatedContent" value="import { useEffect, useState } from &quot;react&quot;;&#10;import FilterComponent from &quot;../components/filter.component.jsx&quot;;&#10;import PersonForm from &quot;../components/personform.component.jsx&quot;;&#10;import Persons from &quot;../components/persons.component.jsx&quot;;&#10;&#10;import personServices from &quot;./services/axios.js&quot;;&#10;&#10;const App = () =&gt; {&#10;  const [persons, setPersons] = useState([]);&#10;  const [filter, setFilter] = useState(&quot;&quot;);&#10;  const [newName, setNewName] = useState(&quot;&quot;);&#10;  const [newNumber, setNewNumber] = useState(&quot;&quot;);&#10;&#10;  useEffect(() =&gt; {&#10;    personServices.getAll(&quot;persons&quot;).then((response) =&gt; {&#10;      setPersons(response.data);&#10;    });&#10;  }, []);&#10;&#10;  const handleFilterChange = (event) =&gt; {&#10;    setFilter(event.target.value);&#10;  };&#10;&#10;  const handleNameChange = (event) =&gt; {&#10;    console.log(event.target.value);&#10;    setNewName(event.target.value);&#10;  };&#10;  const addName = (event) =&gt; {&#10;    event.preventDefault();&#10;    if (checkDuplicate(newName)) {&#10;      const existingPerson = persons.find((p) =&gt; p.name === newName);&#10;      if (!existingPerson) return; // defensive&#10;&#10;      if (&#10;        window.confirm(&#10;          `${newName} is already added to phonebook. Replace the old number with the new one?`,&#10;        )&#10;      ) {&#10;        const changedPerson = { ...existingPerson, number: newNumber };&#10;&#10;        personServices&#10;          .update(&quot;persons&quot;, existingPerson.id, changedPerson)&#10;          .then((response) =&gt; {&#10;            // update local state with server response&#10;            setPersons(&#10;              persons.map((p) =&gt; (p.id !== existingPerson.id ? p : response.data)),&#10;            );&#10;            setNewName(&quot;&quot;);&#10;            setNewNumber(&quot;&quot;);&#10;          })&#10;          .catch((error) =&gt; {&#10;            console.error(&quot;Failed to update person:&quot;, error);&#10;            alert(&#10;              `The information of ${newName} has already been removed from server`,&#10;            );&#10;            setPersons(persons.filter((p) =&gt; p.id !== existingPerson.id));&#10;          });&#10;      }&#10;      return;&#10;    }&#10;&#10;    const nameObject = {&#10;      name: newName,&#10;      number: newNumber,&#10;      id: persons.length + 1,&#10;    };&#10;    personServices.create(&quot;persons&quot;, nameObject).then((returnedObject) =&gt; {&#10;      // Use the server's returned object to keep IDs consistent&#10;      setPersons(persons.concat(returnedObject.data));&#10;      setNewName(&quot;&quot;);&#10;      setNewNumber(&quot;&quot;);&#10;    });&#10;  };&#10;&#10;  const handleNumberChange = (event) =&gt; {&#10;    console.log(event.target.value);&#10;    setNewNumber(event.target.value);&#10;    // Implement number change handling if needed&#10;  };&#10;&#10;  const checkDuplicate = (name) =&gt; {&#10;    // fixed: compare names only&#10;    return persons.some((person) =&gt; person.name === name);&#10;  };&#10;  const personsToShow =&#10;    filter.trim() === &quot;&quot;&#10;      ? persons&#10;      : persons.filter((person) =&gt;&#10;          person.name.toLowerCase().includes(filter.toLowerCase()),&#10;        );&#10;&#10;  const handleDeletePerson = (id, name) =&gt; {&#10;    if (!window.confirm(`Delete ${name}?`)) return;&#10;&#10;    personServices&#10;      .remove(&quot;persons&quot;, id)&#10;      .then(() =&gt; {&#10;        setPersons(persons.filter((p) =&gt; p.id !== id));&#10;      })&#10;      .catch((error) =&gt; {&#10;        console.error(&quot;Failed to delete person:&quot;, error);&#10;        alert(`Information of ${name} has already been removed from server`);&#10;        setPersons(persons.filter((p) =&gt; p.id !== id));&#10;      });&#10;  };&#10;&#10;  return (&#10;    &lt;div&gt;&#10;      &lt;h2&gt;Phonebook&lt;/h2&gt;&#10;&#10;      &lt;FilterComponent&#10;        filter={filter}&#10;        handleFilterChange={handleFilterChange}&#10;      /&gt;&#10;&#10;      &lt;h3&gt;Add a new&lt;/h3&gt;&#10;&#10;      &lt;PersonForm&#10;        newName={newName}&#10;        newNumber={newNumber}&#10;        handleNameChange={handleNameChange}&#10;        handleNumberChange={handleNumberChange}&#10;        addName={addName}&#10;      /&gt;&#10;&#10;      &lt;h3&gt;Numbers&lt;/h3&gt;&#10;&#10;      &lt;Persons personsToShow={personsToShow} onDelete={handleDeletePerson} /&gt;&#10;&#10;      &lt;div&gt;debug: {newName}&lt;/div&gt;&#10;    &lt;/div&gt;&#10;  );&#10;};&#10;&#10;export default App;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>